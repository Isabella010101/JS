<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercício 4: Requisições Assíncronas</title>
</head>
<body>
  <!-- Botão para buscar dados de uma API -->
  <button id="myButton">Buscar Dados</button>

  <!-- Parágrafo onde os dados serão exibidos -->
  <p id="myText"></p>

  <!-- Script JavaScript embutido na página -->
  <script>
    // Seleciona o botão e o parágrafo pelo ID
    const button = document.querySelector('#myButton');
    const text = document.querySelector('#myText');

    // Uma API (Application Programming Interface) é uma interface que permite a comunicação entre sistemas e o compartilhamento de dados. No exemplo, a página utiliza a função fetch para enviar uma requisição assíncrona à API https://jsonplaceholder.typicode.com/todos/2, retornando informações no formato JSON. Esses dados são processados e exibidos no parágrafo da página, incluindo detalhes como userId, id, title e completed. Caso haja um erro na requisição, uma mensagem de erro é apresentada ao usuário.

    // Adiciona um evento de clique ao botão
    button.addEventListener('click', () => {
      //Faz uma requisição assíncrona à API
      // fetch faz uma requisição para trazer uma resposta
      // vai vir informações desse endereço
      fetch('https://jsonplaceholder.typicode.com/todos/4')

      // Para simular erro de requisição
      // fetch('https://invalidurl.example.com')

      // o que vier de resposta, será convertido em json
      // converte em json
      .then(response => response.json())
      .then(data => {
      // exibe os parâmetros de resposta da api
        text.innerHTML = `
          Post ID: ${data.postId}<br>
          ID: ${data.id}<br>
          Nome: ${data.name}<br>
          Completo: ${data.completed}
        `
      })

      .catch(error => {
        // Exibe uma mensagem de erro caso a requisição falhe
        text.textContent = 'Erro a buscar dados!!';
      })

          // Exibe todos os parâmetros da resposta no parágrafo
    });

  </script>
</body>
</html>